<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Charger6kW: FAN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Charger6kW
   &#160;<span id="projectnumber">9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">FAN</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8122064b26eb564e1f005d71f9ed4123"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group_f_a_n.html#ga8122064b26eb564e1f005d71f9ed4123">IO_setFanDutyCycle</a> (unsigned int fanDuty)</td></tr>
<tr class="memdesc:ga8122064b26eb564e1f005d71f9ed4123"><td class="mdescLeft">&#160;</td><td class="mdescRight">Limits fanDuty.  <a href="group__group_f_a_n.html#ga8122064b26eb564e1f005d71f9ed4123">More...</a><br /></td></tr>
<tr class="separator:ga8122064b26eb564e1f005d71f9ed4123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe3992ff4de6ea1f4b8df6881647e622"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group_f_a_n.html#gafe3992ff4de6ea1f4b8df6881647e622">IO_fanDrvPWM</a> ()</td></tr>
<tr class="memdesc:gafe3992ff4de6ea1f4b8df6881647e622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program PWM for FAN.  <a href="group__group_f_a_n.html#gafe3992ff4de6ea1f4b8df6881647e622">More...</a><br /></td></tr>
<tr class="separator:gafe3992ff4de6ea1f4b8df6881647e622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06f1f38191226542867d3269a012d522"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group_f_a_n.html#ga06f1f38191226542867d3269a012d522">IO_fanSenseSpeed</a> ()</td></tr>
<tr class="memdesc:ga06f1f38191226542867d3269a012d522"><td class="mdescLeft">&#160;</td><td class="mdescRight">program counter of edges  <a href="group__group_f_a_n.html#ga06f1f38191226542867d3269a012d522">More...</a><br /></td></tr>
<tr class="separator:ga06f1f38191226542867d3269a012d522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5de2a1f6e57f18a921ea9d55831bb4db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group_f_a_n.html#ga5de2a1f6e57f18a921ea9d55831bb4db">IO_fanSetSpeed</a> ()</td></tr>
<tr class="memdesc:ga5de2a1f6e57f18a921ea9d55831bb4db"><td class="mdescLeft">&#160;</td><td class="mdescRight">High level logic for FAN.  <a href="group__group_f_a_n.html#ga5de2a1f6e57f18a921ea9d55831bb4db">More...</a><br /></td></tr>
<tr class="separator:ga5de2a1f6e57f18a921ea9d55831bb4db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<pre class="fragment">            FAN                                                     high level logic       limit fanDuty

        mainMSP.c:mainMSPloop()-&gt;sch.c:SCH_runActiveTasks()-&gt;io.c:IO_fanSetSpeed-&gt;io.c:IO_setFanDutyCycle( unsigned int fanDuty);

mainMSP.c:TIM3_IRQHandler(void)-&gt;PWM.c:PWM_isr(void)-&gt;io.c:IO_fanSenseSpeed(void);

  mainMSP.c:mainMSPloop()-&gt;sch.c:SCH_runActiveTasks()-&gt;io.c:IO_fanDrvPWM(void);
</pre> <h2 class="groupheader">Function Documentation</h2>
<a id="gafe3992ff4de6ea1f4b8df6881647e622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe3992ff4de6ea1f4b8df6881647e622">&#9670;&nbsp;</a></span>IO_fanDrvPWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IO_fanDrvPWM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Program PWM for FAN. </p>

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00324">324</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>

</div>
</div>
<a id="ga06f1f38191226542867d3269a012d522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga06f1f38191226542867d3269a012d522">&#9670;&nbsp;</a></span>IO_fanSenseSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IO_fanSenseSpeed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>program counter of edges </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>make fanFBCount1 like fanFBCount2</dd></dl>
<p>FAN speed: curFanFBCount1, curFanFBCount2</p>
<p>Speed analized in <a class="el" href="group__group_f_a_n.html#ga5de2a1f6e57f18a921ea9d55831bb4db" title="High level logic for FAN.">IO_fanSetSpeed()</a></p>
<p>This is called at the PWM frequency which is about every 512us as of revision 133. Rated fan speed is 4300RPM which is about 6.5 ms between falling edges, or 13ms for a full rotation of the fan. This corresponds to fanFBPeriod of about 0x0C The safety cutoff for fanFBPeriod is set to FAN_PERIOD_MAXIMUM = 0x14 </p>

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00361">361</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__group_f_a_n_ga06f1f38191226542867d3269a012d522_icgraph.png" border="0" usemap="#agroup__group_f_a_n_ga06f1f38191226542867d3269a012d522_icgraph" alt=""/></div>
<map name="group__group_f_a_n_ga06f1f38191226542867d3269a012d522_icgraph" id="group__group_f_a_n_ga06f1f38191226542867d3269a012d522_icgraph">
<area shape="rect" title="program counter of edges" alt="" coords="129,5,263,32"/>
<area shape="rect" href="pwm_8h.html#a6abc946e40a86c52f2c86095e783c5c1" title=" " alt="" coords="5,5,81,32"/>
</map>
</div>

</div>
</div>
<a id="ga5de2a1f6e57f18a921ea9d55831bb4db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5de2a1f6e57f18a921ea9d55831bb4db">&#9670;&nbsp;</a></span>IO_fanSetSpeed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IO_fanSetSpeed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High level logic for FAN. </p>
<p>Run by scheduler every 2 seconds </p>

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00397">397</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__group_f_a_n_ga5de2a1f6e57f18a921ea9d55831bb4db_cgraph.png" border="0" usemap="#agroup__group_f_a_n_ga5de2a1f6e57f18a921ea9d55831bb4db_cgraph" alt=""/></div>
<map name="group__group_f_a_n_ga5de2a1f6e57f18a921ea9d55831bb4db_cgraph" id="group__group_f_a_n_ga5de2a1f6e57f18a921ea9d55831bb4db_cgraph">
<area shape="rect" title="High level logic for FAN." alt="" coords="5,31,121,57"/>
<area shape="rect" href="group__group_f_a_n.html#ga8122064b26eb564e1f005d71f9ed4123" title="Limits fanDuty." alt="" coords="175,5,318,32"/>
<area shape="rect" href="safety_8c.html#a7d4447bf47593b50ac73afbf73ab045f" title=" " alt="" coords="169,56,324,83"/>
</map>
</div>

</div>
</div>
<a id="ga8122064b26eb564e1f005d71f9ed4123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8122064b26eb564e1f005d71f9ed4123">&#9670;&nbsp;</a></span>IO_setFanDutyCycle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IO_setFanDutyCycle </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>fanDuty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Limits fanDuty. </p>

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00194">194</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__group_f_a_n_ga8122064b26eb564e1f005d71f9ed4123_icgraph.png" border="0" usemap="#agroup__group_f_a_n_ga8122064b26eb564e1f005d71f9ed4123_icgraph" alt=""/></div>
<map name="group__group_f_a_n_ga8122064b26eb564e1f005d71f9ed4123_icgraph" id="group__group_f_a_n_ga8122064b26eb564e1f005d71f9ed4123_icgraph">
<area shape="rect" title="Limits fanDuty." alt="" coords="169,5,312,32"/>
<area shape="rect" href="group__group_f_a_n.html#ga5de2a1f6e57f18a921ea9d55831bb4db" title="High level logic for FAN." alt="" coords="5,5,121,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
